
<% if user_signed_in? %>
    
    <% if current_user.id == @user.id%>
        <div class="title-box mb-5">
            <div class="page-title">あなたのvdot</div>
        </div>
        <br>
    <% else %>
      <div class="title-box mb-5">
        <div class="page-title"><%= "#{@user.nickname}さんのvdot" %></div>
      </div>
      <br>
    <% end %>

<% elsif @user.present? %>
  <div class="title-box mb-5">
    <div class="page-title"><%= "#{@user.nickname}さんのvdot" %></div>
  </div>
  <br>
<% end %>

<% if @user.present? && @five_vdot.present? && @ten_vdot.present? && @half_vdot.present? && @full_vdot.present? %>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js" type="text/javascript"></script>

  <div class="mr-3">
  <canvas id="graph-area" height="300" width="660"></canvas>
  </div>
  <div class="graph-bar bg-content-item">
    <div>
      5km：<%= @vdot_record_five.vdot %>
    </div>
    <div>
      10km：<%= @vdot_record_ten.vdot %>
    </div>
    <div>
      ハーフ：<%= @vdot_record_half.vdot %>
    </div>
    <div>
      フル：<%= @vdot_record_full.vdot %>
    </div>
  </div>

<% end %>

<%# 5km %>
<% if @five_vdot.present? %>
  <div class="bg-content-item p-4 mb-3 rounded">

      <div class="vdot-number">
        <%= "vdot：#{@vdot_record_five.vdot}" %>
      </div>

      <br>
      <p class="vdot-b-t">・5kmの目指すべきタイムと、同レベルの他種目のタイムです！</p>

      <div class="vdot-five d-flex align-items-center justify-content-between"> 
        5km　　　&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_five.five_km_minute}分" %>
          <%= "#{@vdot_record_five.five_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">
        10km　　&nbsp;&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_five.ten_km_minute}分" %>
          <%= "#{@vdot_record_five.ten_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">  
        ハーフ
        <div>
          <%= "#{@vdot_record_five.half_hour}時間" %>
          <%= "#{@vdot_record_five.half_minute}分" %>
          <%= "#{@vdot_record_five.half_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">  
        フル&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_five.full_hour}時間" %>
          <%= "#{@vdot_record_five.full_minute}分" %>
          <%= "#{@vdot_record_five.full_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <br>
      <p class="vdot-b-t">・5kmの記録を向上させるための練習目安ペースです！</p>

      <div class="d-flex justify-content-between ">
        <div>
          <%= "J：#{@vdot_pace_five.e_pace} /km" %>
        </div>
        <div>
          <%= "M：#{@vdot_pace_five.m_pace} /km" %>
        </div>
        <div>
          <%= "T20：#{@vdot_pace_five.t_pace_twenty} /km" %>
        </div>
        <div>
          <%= "T40：#{@vdot_pace_five.t_pace_forty} /km" %>
        </div>
      </div>  

  </div>
<% end %>

<%# 10km %>
<% if @ten_vdot.present? %>
  <div class="bg-content-item p-4 mb-3 rounded">

      <div class="vdot-number">
        <%= "vdot：#{@vdot_record_ten.vdot}" %>
      </div>

      <br>
      <p class="vdot-b-t">・10kmの目指すべきタイムと、同レベルの他種目のタイムです！</p>

      <div class="d-flex align-items-center justify-content-between"> 
        5km　　　&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_ten.five_km_minute}分" %>
          <%= "#{@vdot_record_ten.five_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="vdot-ten d-flex align-items-center justify-content-between">
        10km　　&nbsp;&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_ten.ten_km_minute}分" %>
          <%= "#{@vdot_record_ten.ten_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">  
        ハーフ
        <div>
          <%= "#{@vdot_record_ten.half_hour}時間" %>
          <%= "#{@vdot_record_ten.half_minute}分" %>
          <%= "#{@vdot_record_ten.half_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">  
        フル&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_ten.full_hour}時間" %>
          <%= "#{@vdot_record_ten.full_minute}分" %>
          <%= "#{@vdot_record_ten.full_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <br>
      <p class="vdot-b-t">・10kmの記録を向上させるための練習目安ペースです！</p>

      <div class="d-flex justify-content-between ">
        <div>
          <%= "J：#{@vdot_pace_ten.e_pace} /km" %>
        </div>
        <div>
          <%= "M：#{@vdot_pace_ten.m_pace} /km" %>
        </div>
        <div>
          <%= "T20：#{@vdot_pace_ten.t_pace_twenty} /km" %>
        </div>
        <div>
          <%= "T40：#{@vdot_pace_ten.t_pace_forty} /km" %>
        </div>
      </div>  

  </div>
<% end %>  

<%# half %>
<% if @half_vdot.present? %>
  <div class="bg-content-item p-4 mb-3 rounded">

      <div class="vdot-number">
        <%= "vdot：#{@vdot_record_half.vdot}" %>
      </div>

      <br>
      <p class="vdot-b-t">・ハーフの目指すべきタイムと、同レベルの他種目のタイムです！</p>

      <div class="d-flex align-items-center justify-content-between"> 
        5km　　　&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_half.five_km_minute}分" %>
          <%= "#{@vdot_record_half.five_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">
        10km　　&nbsp;&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_half.ten_km_minute}分" %>
          <%= "#{@vdot_record_half.ten_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="vdot-half d-flex align-items-center justify-content-between">  
        ハーフ
        <div>
          <%= "#{@vdot_record_half.half_hour}時間" %>
          <%= "#{@vdot_record_half.half_minute}分" %>
          <%= "#{@vdot_record_half.half_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">  
        フル&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_half.full_hour}時間" %>
          <%= "#{@vdot_record_half.full_minute}分" %>
          <%= "#{@vdot_record_half.full_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <br>
      <p class="vdot-b-t">・ハーフの記録を向上させるための練習目安ペースです！</p>

      <div class="d-flex justify-content-between ">
        <div>
          <%= "J：#{@vdot_pace_half.e_pace} /km" %>
        </div>
        <div>
          <%= "M：#{@vdot_pace_half.m_pace} /km" %>
        </div>
        <div>
          <%= "T20：#{@vdot_pace_half.t_pace_twenty} /km" %>
        </div>
        <div>
          <%= "T40：#{@vdot_pace_half.t_pace_forty} /km" %>
        </div>
      </div>  

  </div>
<% end %>  

<%# full %>
<% if @full_vdot.present? %>
  <div class="bg-content-item p-4 mb-3 rounded">

      <div class="vdot-number">
        <%= "vdot：#{@vdot_record_full.vdot}" %>
      </div>

      <br>
      <p class="vdot-b-t">・フルの目指すべきタイムと、同レベルの他種目のタイムです！</p>

      <div class="d-flex align-items-center justify-content-between"> 
        5km　　　&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_full.five_km_minute}分" %>
          <%= "#{@vdot_record_full.five_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">
        10km　　&nbsp;&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_full.ten_km_minute}分" %>
          <%= "#{@vdot_record_full.ten_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="d-flex align-items-center justify-content-between">  
        ハーフ
        <div>
          <%= "#{@vdot_record_full.half_hour}時間" %>
          <%= "#{@vdot_record_full.half_minute}分" %>
          <%= "#{@vdot_record_full.half_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="vdot-full d-flex align-items-center justify-content-between">  
        フル&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{@vdot_record_full.full_hour}時間" %>
          <%= "#{@vdot_record_full.full_minute}分" %>
          <%= "#{@vdot_record_full.full_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <br>
      <p class="vdot-b-t">・フルの記録向上させるための練習目安ペースです！</p>

      <div class="d-flex justify-content-between ">
        <div>
          <%= "J：#{@vdot_pace_full.e_pace} /km" %>
        </div>
        <div>
          <%= "M：#{@vdot_pace_full.m_pace} /km" %>
        </div>
        <div>
          <%= "T20：#{@vdot_pace_full.t_pace_twenty} /km" %>
        </div>
        <div>
          <%= "T40：#{@vdot_pace_full.t_pace_forty} /km" %>
        </div>
      </div>  

  </div>
<% end %>  




<br><br><br>

<div class="title-box">
  <div class="page-title">走力レベル一覧</div>
</div>
<br>

<div class="content">
  <br>
  <% @vdot_records.each do |vdot_record| %>
    <div class="d-flex">
      <div class = "five-record-logo hide-list">5km</div>
      <div class = "ten-record-logo hide-list">10km</div>
      <div class = "half-record-logo hide-list">ハーフ</div>
      <div class = "full-record-logo hide-list">フル</div>
    </div>  
    <div class="bg-content-item p-4 mb-3 rounded vdot-record-item">
      
      <div class="vdot-number">
        <%= "vdot：#{vdot_record.vdot}" %>
      </div>  

      <div class="vdot-five-bg d-flex align-items-center justify-content-between"> 
        5km　　　&nbsp;&nbsp;
        <div>
          <%= "#{vdot_record.five_km_minute}分" %>
          <%= "#{vdot_record.five_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="vdot-ten-bg d-flex align-items-center justify-content-between">
        10km　　&nbsp;&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{vdot_record.ten_km_minute}分" %>
          <%= "#{vdot_record.ten_km_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="vdot-half-bg d-flex align-items-center justify-content-between">  
        ハーフ
        <div>
          <%= "#{vdot_record.half_hour}時間" %>
          <%= "#{vdot_record.half_minute}分" %>
          <%= "#{vdot_record.half_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

      <div class="vdot-full-bg d-flex align-items-center justify-content-between">  
        フル&nbsp;&nbsp;&nbsp;
        <div>
          <%= "#{vdot_record.full_hour}時間" %>
          <%= "#{vdot_record.full_minute}分" %>
          <%= "#{vdot_record.full_second}秒" %>
        </div>
        <div></div><div></div><div></div>
      </div>

    </div>
  <% end %>
</div>  

<br><br><br>

<div class="title-box">
  <div class="page-title">練習目安ペース一覧</div>
</div>

  <br>

<div class="content">  
  <% @vdot_paces.all.each do |vdot_pace| %>
    <div class="d-flex">
      <div class = "five-pace-logo hide-list">5km</div>
      <div class = "ten-pace-logo hide-list">10km</div>
      <div class = "half-pace-logo hide-list">ハーフ</div>
      <div class = "full-pace-logo hide-list">フル</div>
    </div>  
    <div class="vdot-pace-item bg-content-item p-4 rounded">

      <div class="vdot-number"><%= "vdot：#{vdot_pace.vdot}" %></div>

      <div class="d-flex justify-content-between">
        軽いジョギング　　　　 &nbsp;
        <p><%= vdot_pace.e_pace %> /km</p>
        <div></div><div></div><div></div>
      </div>

       <div class="d-flex  justify-content-between">
        ロング走 &nbsp;&nbsp;（20km前後）
        <p><%= vdot_pace.m_pace %> /km</p>
        <div></div><div></div><div></div>
      </div>

       <div class="d-flex align-items-center justify-content-between">
        ペース走　（20分間）　 &nbsp;
        <p><%=vdot_pace.t_pace_twenty %> /km</p>
        <div></div><div></div><div></div>
      </div>

       <div class="d-flex align-items-center justify-content-between">
        ペース走　（40分間）　 &nbsp;
        <p><%=vdot_pace.t_pace_forty %> /km</p>
        <div></div><div></div><div></div>
      </div>
      
    </div>
    <br>
  <% end %>
</div>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

<% if @user.present? && @five_vdot.present? && @ten_vdot.present? && @half_vdot.present? && @full_vdot.present? %>

  <script type="text/javascript">
    const lineChartData = {
        labels : ["", "", "", "" ],
        datasets : [
          {
              label: "緑データ",
              fillColor : "rgba(92,220,92,0.6)", // 線から下端までを塗りつぶす色
              strokeColor : "#f79235", // 折れ線の色
              pointColor : "#f79235",  // ドットの塗りつぶし色
              pointStrokeColor : "white",        // ドットの枠線色
              pointHighlightFill : "yellow",     // マウスが載った際のドットの塗りつぶし色
              pointHighlightStroke : "green",    // マウスが載った際のドットの枠線色
              data : [ <%= @vdot_record_five.vdot %>,
                      <%= @vdot_record_ten.vdot %>,
                      <%= @vdot_record_half.vdot %>,
                      <%= @vdot_record_full.vdot %> ]       // 各点の値
                          
          },
        ]
    }

    window.onload = function(){
        const ctx = document.getElementById("graph-area").getContext("2d");
        window.myLine = new Chart(ctx).Line(lineChartData,{
        responsive : true
        });
    };

  </script>

<% end %>

<script>
  $(function(){

    // 距離別タイム一覧
    $(".five-record-logo").hide();
    $(".ten-record-logo").hide();
    $(".half-record-logo").hide();
    $(".full-record-logo").hide();
    
    $(".five-record-logo").eq(<%= @five_vdot %>).show();
    $(".ten-record-logo").eq(<%= @ten_vdot %>).show();
    $(".half-record-logo").eq(<%= @half_vdot %>).show();
    $(".full-record-logo").eq(<%= @full_vdot %>).show();

    $(".five-record-logo").eq(<%= @five_vdot %>).css("background-color", "pink");
    $(".ten-record-logo").eq(<%= @ten_vdot %>).css("background-color", "violet");
    $(".half-record-logo").eq(<%= @half_vdot %>).css("background-color", "lightblue");
    $(".full-record-logo").eq(<%= @full_vdot %>).css("background-color", "gold");
    
    $(".vdot-record-item").eq(<%= @five_vdot %>).css("border", "5px solid red");
    $(".vdot-record-item").eq(<%= @ten_vdot %>).css("border", "5px solid red");
    $(".vdot-record-item").eq(<%= @half_vdot %>).css("border", "5px solid red");
    $(".vdot-record-item").eq(<%= @full_vdot %>).css("border", "5px solid red");

    $(".vdot-five-bg").eq(<%= @five_vdot %>).css("background-color", "pink");
    $(".vdot-ten-bg").eq(<%= @ten_vdot %>).css("background-color", "violet");
    $(".vdot-half-bg").eq(<%= @half_vdot %>).css("background-color", "lightblue");
    $(".vdot-full-bg").eq(<%= @full_vdot %>).css("background-color", "gold");
    

    // 目安ぺース一覧
    $(".five-pace-logo").hide();
    $(".ten-pace-logo").hide();
    $(".half-pace-logo").hide();
    $(".full-pace-logo").hide();

    $(".five-pace-logo").eq(<%= @five_vdot %>).show();
    $(".ten-pace-logo").eq(<%= @ten_vdot %>).show();
    $(".half-pace-logo").eq(<%= @half_vdot %>).show();
    $(".full-pace-logo").eq(<%= @full_vdot %>).show();

    $(".five-pace-logo").eq(<%= @five_vdot %>).css("background-color", "pink");
    $(".ten-pace-logo").eq(<%= @ten_vdot %>).css("background-color", "violet");
    $(".half-pace-logo").eq(<%= @half_vdot %>).css("background-color", "lightblue");
    $(".full-pace-logo").eq(<%= @full_vdot %>).css("background-color", "gold");

    $(".vdot-pace-item").eq(<%= @ten_vdot %>).css("border", "5px solid red");
    $(".vdot-pace-item").eq(<%= @half_vdot %>).css("border", "5px solid red");
    $(".vdot-pace-item").eq(<%= @full_vdot %>).css("border", "5px solid red");
    $(".vdot-pace-item").eq(<%= @five_vdot %>).css("border", "5px solid red");
    
  });
</script>

